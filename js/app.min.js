!function(){"use strict";var t,a=!1,e=document.getElementsByClassName("stone_bar"),n=document.getElementsByClassName("stone_block"),o=document.getElementsByClassName("land_bar"),r=Array.prototype.slice.call(e),i=(Array.prototype.slice.call(n),Array.prototype.slice.call(o)),s=r[0].getBoundingClientRect(),l=document.getElementById("start"),c=function(){this.cover="images/bug.png",this.x=0,this.obstaclesOnBoard=[]};function h(){this.cover="images/boy.png",this.activePlayer,this.range=s.width,this.move=this.range/5,this.jumpX=0,this.jumpY=0}c.prototype.createElement=function(){var e=document.createElement("img");e.src=this.cover,e.className="obstacle",this.enterGame(e)},c.prototype.enterGame=function(e){var t=Math.floor(4*Math.random());r[t].children[0].appendChild(e),this.update(e),this.obstaclesOnBoard.push(e)},c.prototype.outOfBounds=function(){var a=s.x+s.width;this.obstaclesOnBoard.forEach(function(e,t){e.getBoundingClientRect().x>=a&&e.parentNode.removeChild(e)})},c.prototype.update=function(e){var t=e,a=0;setInterval(function(){var e=++a+"%";t.style.left=e},5),this.outOfBounds()},h.prototype.addPlayer=function(){var e=document.createElement("img"),t=i[0].children[2];e.src=this.cover,e.setAttribute("id","player"),this.activePlayer=e,t.appendChild(e)},h.prototype.handleInput=function(e){switch(e){case"left":var t=this.jumpX+this.move;this.jumpX=t;var a=this.jumpX+"px";this.activePlayer.style.right=a;break;case"up":t=this.jumpY+this.move;this.jumpY=t;a=this.jumpY+"px";this.activePlayer.style.bottom=a;break;case"right":t=this.jumpX-this.move;this.jumpX=t;a=this.jumpX+"px";this.activePlayer.style.right=a;break;case"down":t=this.jumpY-this.move;this.jumpY=t;a=this.jumpY+"px";this.activePlayer.style.bottom=a;break;default:console.log("other")}},h.prototype.removePlayer=function(){var e=document.getElementById("player");e.parentNode.removeChild(e)};var p=new c,m=new h;document.addEventListener("keyup",function(e){m.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])}),l.addEventListener("click",function(){var e;(a=!a)?(l.innerHTML="RESET",t=setInterval(function(){p.createElement()},1e3),m.addPlayer()):(l.innerHTML="START GAME",m.removePlayer(),clearInterval(t),e=document.getElementsByClassName("obstacle"),Array.prototype.slice.call(e).forEach(function(e,t){e.parentNode.removeChild(e)}))})}();