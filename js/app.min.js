!function(){"use strict";var t,o=!1,e=document.getElementsByClassName("stone_bar"),n=document.getElementsByClassName("stone_block"),a=document.getElementsByClassName("land_bar"),i=Array.prototype.slice.call(e),r=(Array.prototype.slice.call(n),Array.prototype.slice.call(a)),s=i[0].getBoundingClientRect(),l=document.getElementById("start"),c=function(){this.cover="images/bug.png",this.x=0,this.obstaclesOnBoard=[]};function h(){this.cover="images/boy.png",this.activePlayer,this.rangeX=s.width,this.moveY=s.height,this.moveX=this.rangeX/5-4,this.jumpX=0,this.jumpY=0}c.prototype.createElement=function(){var e=document.createElement("img");e.src=this.cover,e.className="obstacle",this.enterGame(e)},c.prototype.enterGame=function(e){var t=Math.floor(4*Math.random());i[t].children[0].appendChild(e),this.update(e),this.obstaclesOnBoard.push(e)},c.prototype.outOfBounds=function(){var o=s.x+s.width;this.obstaclesOnBoard.forEach(function(e,t){e.getBoundingClientRect().x>=o&&e.parentNode.removeChild(e)})},c.prototype.handleCollision=function(){var e=document.getElementsByClassName("obstacle");Array.prototype.slice.call(e).forEach(function(e,t){var o=e.getBoundingClientRect(),n=document.getElementById("player").getBoundingClientRect();if(o.y===n.y&&o.x>=n.x){var a=document.getElementById("player");a.style.right=0,a.style.bottom=0,console.log("bump"),console.dir(a)}})},c.prototype.update=function(e){var t=e,o=0;setInterval(function(){var e=++o+"%";t.style.left=e},5),this.outOfBounds(),this.handleCollision()},h.prototype.addPlayer=function(){var e=document.createElement("img"),t=r[0].children[2];e.src=this.cover,e.setAttribute("id","player"),this.activePlayer=e,this.activePlayer.playerOptions=this,t.appendChild(this.activePlayer)},h.prototype.handleInput=function(e){switch(e){case"left":var t=this.jumpX+this.moveX;this.jumpX=t;var o=this.jumpX+"px";this.activePlayer.style.right=o;break;case"up":t=this.jumpY+this.moveY;this.jumpY=t;o=this.jumpY+"px";this.activePlayer.style.bottom=o;break;case"right":t=this.jumpX-this.moveX;this.jumpX=t;o=this.jumpX+"px";this.activePlayer.style.right=o;break;case"down":t=this.jumpY-this.moveY;this.jumpY=t;o=this.jumpY+"px";this.activePlayer.style.bottom=o;break;default:console.log("other")}},h.prototype.removePlayer=function(){var e=document.getElementById("player");e.parentNode.removeChild(e)};var p=new c,m=new h;document.addEventListener("keyup",function(e){m.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])}),l.addEventListener("click",function(){var e;(o=!o)?(l.innerHTML="RESET",t=setInterval(function(){p.createElement()},1e3),m.addPlayer()):(l.innerHTML="START GAME",m.removePlayer(),clearInterval(t),e=document.getElementsByClassName("obstacle"),Array.prototype.slice.call(e).forEach(function(e,t){e.parentNode.removeChild(e)}))})}();